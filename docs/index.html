<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ODM Data Access • ODMr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><meta property="og:title" content="ODM Data Access">
<meta property="og:description" content="A collection of functions to aid in accessing and loading
    data to and from a CUAHSI ODM database.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ODMr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/ODMr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ODM_notes.html">ODM notes</a>
    </li>
    <li>
      <a href="articles/Woking_ODMr.html">Working with ODMr</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="odmr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#odmr" class="anchor"></a>ODMr</h1></div>
<p>A R package for working with an instance of the CUAHSI ODM running on MS-SQL. Works in our office, may or may not be useful to others outside our work-site. The development version can be installed using:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"D-ESC/ODMr"</span>)</code></pre></div>
<div id="odbc" class="section level3">
<h3 class="hasAnchor">
<a href="#odbc" class="anchor"></a>ODBC</h3>
<p>In order to talk to the database, you’ll need to establish an ODBC connection to the ODM database on the machine that you’re working on. To do this in Win7, go to Control Panel -&gt; Administrative Tools, then choose “Data Sources (ODBC)”. You’ll want to add a “User DSN”.</p>
</div>
<div id="the-basics" class="section level3">
<h3 class="hasAnchor">
<a href="#the-basics" class="anchor"></a>The Basics</h3>
<p>This will all be easier to use and understand if you have a fundamental understanding of the underlying data model. The model and the underlying motives for it’s design can be found at <a href="http://www.cuahsi.org" class="uri">http://www.cuahsi.org</a></p>
<p>Here is a quick example. You’ll need the package RODBC in order to establish a connection using an ODBC connection. <code><a href="http://www.rdocumentation.org/packages/DBI/topics/dbConnect">DBI::dbConnect()</a></code> establishes a connection to the specified DSN and <code><a href="reference/ODMgetCatalog.html">ODMgetCatalog()</a></code> can be used to import the series catalog.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ODMr)
ODM &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/DBI/topics/dbConnect">dbConnect</a></span>(odbc<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/odbc/topics/odbc">odbc</a></span>(), <span class="dt">dsn =</span> <span class="st">"ODM"</span>, <span class="dt">database =</span> <span class="st">"OD"</span>, <span class="dt">UID =</span> <span class="st">"update"</span>, 
    <span class="dt">PWD =</span> <span class="st">"update"</span>, <span class="dt">Port =</span> <span class="dv">1433</span>)
Catalog =<span class="st"> </span><span class="kw"><a href="reference/ODMgetCatalog.html">ODMgetCatalog</a></span>()</code></pre></div>
<p>Using the established connection and referencing the series catalog we can import data from the database. The series catalog is not stable so only use this method to quickly look at certain data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Data &lt;-<span class="st"> </span><span class="kw"><a href="reference/ODMgetData.html">ODMgetData</a></span>(<span class="dt">SeriesID =</span> <span class="dv">10</span>, <span class="dt">startDate =</span> <span class="st">"2013-06-01"</span>,
  <span class="dt">endDate =</span> <span class="st">"2014-06-01"</span>)</code></pre></div>
<p>A more stable reference can be had by specifying SiteID, VariableID, MethodID and QualityControlLevelID.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Data &lt;-<span class="st"> </span><span class="kw"><a href="reference/ODMgetData.html">ODMgetData</a></span>(<span class="dt">SiteID =</span> <span class="dv">1</span>, <span class="dt">VariableID =</span> <span class="dv">1</span>, <span class="dt">MethodID =</span> <span class="dv">9</span>, <span class="dt">QCLevelID =</span> <span class="dv">0</span>)</code></pre></div>
<p>Multiple data series can be queried at once. The function makes use of the IN operator in the underlying SQL statement to specify multiple values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tmp =<span class="st"> </span><span class="kw"><a href="reference/ODMgetData.html">ODMgetData</a></span>(<span class="dt">SiteID =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>) , <span class="dt">VariableID =</span> <span class="dv">1</span>, <span class="dt">MethodID =</span> <span class="dv">9</span>,
  <span class="dt">QCLevelID =</span> <span class="dv">0</span>, <span class="dt">startDate =</span> <span class="st">"2013-06-01"</span>, <span class="dt">endDate =</span> <span class="st">"2013-07-01"</span>)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Chris McConnell <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Chris McConnell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
