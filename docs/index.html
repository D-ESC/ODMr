<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ODM Data Access • ODMr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="ODM Data Access">
<meta property="og:description" content="A collection of functions to aid in accessing and loading
    data to and from a CUAHSI ODM database.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ODMr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/ODMr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ODM_notes.html">ODM notes</a>
    </li>
    <li>
      <a href="articles/Woking_ODMr.html">Working with ODMr</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="odmr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#odmr" class="anchor"></a>ODMr</h1></div>
<p>A R package for working with an instance of the CUAHSI ODM running on MS-SQL. Works in our office, may or may not be useful to others outside our work-site. The development version can be installed using:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"D-ESC/ODMr"</span>)</a></code></pre></div>
<div id="odbc" class="section level3">
<h3 class="hasAnchor">
<a href="#odbc" class="anchor"></a>ODBC</h3>
<p>In order to talk to the database, you’ll need to establish an ODBC connection to the ODM database on the machine that you’re working on. To do this in Win7, go to Control Panel -&gt; Administrative Tools, then choose “Data Sources (ODBC)”. You’ll want to add a “User DSN”.</p>
</div>
<div id="the-basics" class="section level3">
<h3 class="hasAnchor">
<a href="#the-basics" class="anchor"></a>The Basics</h3>
<p>This will all be easier to use and understand if you have a fundamental understanding of the underlying data model. The model and the underlying motives for it’s design can be found at <a href="http://www.cuahsi.org" class="uri">http://www.cuahsi.org</a></p>
<p>Here is a quick example. You’ll need the package RODBC in order to establish a connection using an ODBC connection. <code><a href="https://dbi.r-dbi.org/reference/dbConnect.html">DBI::dbConnect()</a></code> establishes a connection to the specified DSN and <code>ODMgetCatalog()</code> can be used to import the series catalog.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ODMr)</a>
<a class="sourceLine" id="cb2-2" title="2">ODM &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span>(odbc<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/odbc/man/odbc.html">odbc</a></span>(), <span class="dt">dsn =</span> <span class="st">"ODM"</span>, <span class="dt">database =</span> <span class="st">"OD"</span>, <span class="dt">UID =</span> <span class="st">"update"</span>, </a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="dt">PWD =</span> <span class="st">"update"</span>, <span class="dt">Port =</span> <span class="dv">1433</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">Catalog =<span class="st"> </span><span class="kw"><a href="reference/odm_read_tbl.html">odm_read_tbl</a></span>()</a></code></pre></div>
<p>Using the established connection and referencing the series catalog we can import data by specifying site_id, variable_id, method_id and level_id.</p>
<pre class="{r}"><code>Data &lt;- odm_read(site_id = 15, variable_id = 3, method_id = 1, level_id = 1,
                  start_date = "2016-03-01", end_date = "2016-06-01")</code></pre>
<p>Multiple data series can be queried at once. The function makes use of the IN operator in the underlying SQL statement to specify multiple values.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">Data &lt;-<span class="st"> </span><span class="kw"><a href="reference/odm_read.html">odm_read</a></span>(<span class="dt">site_id =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">5</span>) , <span class="dt">variable_id =</span> <span class="dv">1</span>, <span class="dt">method_id =</span> <span class="dv">9</span>,</a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">level_id =</span> <span class="dv">0</span>, <span class="dt">start_date =</span> <span class="st">"2013-06-01"</span>, <span class="dt">end_date =</span> <span class="st">"2013-07-01"</span>)</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Chris McConnell <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Chris McConnell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
